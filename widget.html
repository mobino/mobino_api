<!DOCTYPE html>
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="md5.js"></script>
  </head>
  <body>
    <div>
      <ul>
        <li>Product Name: Lindt Milk</li>
        <li>Description: Yummy</li>
        <li>Price: 10.5 USD</li>
      </ul>

      <div id="mobino">
        <p>Click here to pay with Mobino</p>
        <script src="http://localhost:4080/api/v1/mobino.js"></script>
        <script>
          function guid() {
            var S4 = function() {
              return (((1+Math.random())*0x10000)|0).toString(16).substring(1);
            };
            return (S4()+'-'+S4()+S4());
          }

          /*
            for test purpose, we just use javascript to calculate signature
            however, in real production, this signature should be calculated
            at the server side (NEVER show the secret).
          */
          var secret = '46ixHhzoP/GS9YY7S9SyaOmCvWA+X1m08Ch+2fhy7hw=';
          var nonce = guid();

          Mobino.serverUrl = 'http://localhost:4080';
          Mobino.createButton({
            lang: 'fr',
            country: 'CH',
            callback: 'http://jichengchen.com',
            transaction: {
              amount: 10.5,
              currency: 'USD',
              api_key: 'bdf358e31db4d84b72f25a2f5f02110c',
              reference_number: 371947,
              nonce: nonce,
              signature: MD5(nonce + secret)
            }
          });
        </script>
      </div>
    </div>
  </body>
</html>
